/*
 * X-Shield — injected into x.com pages
 * Hides distracting UI and controls tweet visibility during AI filtering.
 */

/* -------------------------------------------------------
   1. Hide trending sidebar
   ------------------------------------------------------- */
[data-testid="sidebarColumn"] {
  display: none !important;
}

/* -------------------------------------------------------
   2. Hide "What's happening" and "Who to follow" sections
   These appear as timeline modules inside the feed with
   specific data-testid attributes.
   ------------------------------------------------------- */
[aria-label="Timeline: Trending now"],
[aria-label="Timeline: Who to follow"],
[aria-label="Who to follow"],
[aria-label="who to follow" i],
[aria-label="You might like"],
[aria-label="you might like" i],
[aria-label="Relevant people"],
[aria-label="relevant people" i],
[data-testid="trend"],
[data-testid="placementTracking"],
a[href="/explore/tabs/trending"],
a[href="/i/connect_people"] {
  display: none !important;
}

/* -------------------------------------------------------
   3. Pending tweets — awaiting AI classification
   visibility: hidden keeps the element in the layout so
   scroll position is preserved; height: auto is the default
   but stated explicitly for clarity.
   ------------------------------------------------------- */
.x-shield-pending {
  visibility: hidden !important;
  height: auto !important;
}

/* -------------------------------------------------------
   4. Approved tweets — passed AI filter
   Fade in with a subtle opacity transition.
   ------------------------------------------------------- */
.x-shield-approved {
  visibility: visible !important;
  animation: x-shield-fade-in 0.3s ease-out;
}

@keyframes x-shield-fade-in {
  from { opacity: 0; }
  to   { opacity: 1; }
}

/* -------------------------------------------------------
   4b. Nourished tweets — promoted beneficial content
   Green left border indicates actively nourishing content.
   ------------------------------------------------------- */
.x-shield-nourished {
  visibility: visible !important;
  border-left: 3px solid #4ade80 !important;
  animation: x-shield-fade-in 0.3s ease-out;
}


/* -------------------------------------------------------
   5. Filtered tweets — removed by AI classification
   ------------------------------------------------------- */
.x-shield-filtered {
  display: none !important;
}

/* -------------------------------------------------------
   5b. Distilled tweets — rewritten by AI to remove manipulation
   Subtle left border to indicate the text has been cleaned up.
   ------------------------------------------------------- */
.x-shield-distilled {
  visibility: visible !important;
  border-left: 3px solid #7c6bbd !important;
  animation: x-shield-fade-in 0.3s ease-out;
}

.x-shield-distilled-label {
  display: block;
  font-size: 11px;
  color: #7c6bbd;
  margin-top: 6px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  letter-spacing: 0.02em;
}

/* -------------------------------------------------------
   5c. Unclassified tweets — classification failed, shown with warning border
   ------------------------------------------------------- */
.x-shield-unclassified {
  visibility: visible !important;
  border-left: 3px solid #d4a84b !important;
  opacity: 0.85;
}

/* -------------------------------------------------------
   6. "Configure API key" overlay
   Covers the main feed area with a semi-opaque backdrop
   and centered instructional text.
   ------------------------------------------------------- */
.x-shield-overlay {
  position: fixed;
  inset: 0;
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.75);
  color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  font-size: 18px;
  text-align: center;
  padding: 24px;
  line-height: 1.5;
}

/* -------------------------------------------------------
   7. Notification badge suppression
   Hides the blue notification count badge on the bell icon
   to break the variable-ratio reinforcement loop. Users
   can still click Notifications — we just remove the
   Pavlovian dot that triggers compulsive checking.
   DMs badge is left alone (interpersonal communication).
   ------------------------------------------------------- */
a[href="/notifications"] [aria-live="polite"],
a[data-testid="AppTabBar_Notifications_Link"] [aria-live="polite"],
a[href="/notifications"] > div > div:not(:first-child),
a[data-testid="AppTabBar_Notifications_Link"] > div > div:not(:first-child) {
  display: none !important;
}

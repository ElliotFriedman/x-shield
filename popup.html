<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>X-Shield</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup">
    <header class="header">
      <h1 class="header-title">X-Shield</h1>
      <span class="header-subtitle">Content Filter</span>
    </header>

    <!-- Settings Section -->
    <section class="section section-settings">
      <h2 class="section-title">Settings</h2>

      <div class="setting-group">
        <label class="setting-label">Classification Mode</label>
        <div class="mode-toggle">
          <button id="btn-mode-local" class="btn btn-mode active">Claude Code</button>
          <button id="btn-mode-api" class="btn btn-mode">API Key</button>
        </div>
      </div>

      <div id="mode-local-settings" class="setting-group">
        <label class="setting-label">Server Status</label>
        <div id="server-status">
          <span id="server-status-text" class="server-status-text">Checking...</span>
        </div>
      </div>

      <div id="mode-api-settings" class="setting-group hidden">
        <label class="setting-label" for="input-api-key">Anthropic API Key</label>
        <div class="api-key-input-group">
          <input type="password" id="input-api-key" class="input" placeholder="sk-ant-...">
          <button id="btn-save-api-key" class="btn btn-primary btn-small">Save</button>
        </div>
        <span id="api-key-status" class="api-key-status"></span>
      </div>

      <div class="setting-group">
        <label class="setting-label" for="input-time-limit">Daily time limit (minutes)</label>
        <input type="number" id="input-time-limit" class="input input-number" min="1" max="1440" value="15">
      </div>
    </section>

    <!-- Status Section -->
    <section class="section section-status">
      <h2 class="section-title">Status</h2>
      <div class="time-display">
        <span id="time-used-text" class="time-text">0 / 15 minutes</span>
      </div>
      <div class="progress-bar-track">
        <div id="progress-bar" class="progress-bar-fill" style="width: 0%"></div>
      </div>
    </section>

    <!-- Stats Section -->
    <section class="section section-stats">
      <h2 class="section-title">Stats Today</h2>
      <div class="stats-grid">
        <div class="stat-item">
          <span class="stat-value" id="stat-analyzed">0</span>
          <span class="stat-label">Analyzed</span>
        </div>
        <div class="stat-item">
          <span class="stat-value stat-nourished" id="stat-nourished">0</span>
          <span class="stat-label">Nourished</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="stat-shown">0</span>
          <span class="stat-label">Shown</span>
        </div>
        <div class="stat-item">
          <span class="stat-value stat-distilled" id="stat-distilled">0</span>
          <span class="stat-label">Distilled</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="stat-filtered">0</span>
          <span class="stat-label">Filtered</span>
        </div>
      </div>
      <div class="stat-detail" id="filtered-pct"></div>
    </section>

    <!-- Tweet Log Section -->
    <section class="section" id="section-logging">
      <h2 class="section-title">Tweet Log</h2>
      <div class="setting-group">
        <label class="setting-label">Log all classifications</label>
        <div class="mode-toggle">
          <button id="btn-log-off" class="btn btn-mode active">Off</button>
          <button id="btn-log-on" class="btn btn-mode">On</button>
        </div>
      </div>
      <div id="log-controls" class="hidden">
        <div class="log-info">
          <span id="log-count-text" class="log-count-text">0 entries logged</span>
        </div>
        <div class="log-actions">
          <button id="btn-export-log" class="btn btn-primary btn-small">Export JSON</button>
          <button id="btn-clear-log" class="btn btn-small btn-danger">Clear Log</button>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <span class="footer-version">X-Shield v2.0.0</span>
      <button id="btn-reset-stats" class="btn btn-small btn-danger">Reset Stats</button>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>
